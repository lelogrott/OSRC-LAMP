\chapter{Conceitos}
\label{cap:conceitos}

Para que se possa ter uma maior compreensão das vulnerabilidades de um sistema, primeiro
deve-se conhecer o mesmo. Para isso, nesse capítulo, serão apresentados os conceitos e
definições básicas para compreensão de como o ambiente \ac{LAMP} funciona.


\section{LAMP}
\label{sec:lamp}

\ac{LAMP} é conjunto de soluções em forma de uma lista dos componentes centrais usados na
implementação de uma aplicação web. Seu uso é predominante entre pequenas e médias empresas,
já que tais componentes são de código aberto e não têm custo. \ac{LAMP} pode ser definido pelo seus componentes, sendo eles:
\textbf{L}inux (sistema operacional), \textbf{A}pache (serividor web), \textbf{M}ySQL(software de banco de dados)
e \textbf{P}HP (linguagem de programação), que também pode se referir a Perl ou Python, apesar
de não ser muito comum (mais detalhes na Seção \ref{sec:componentes}).

Um exemplo do funcionamento de cada componente do \ac{LAMP}, em um servidor \textit{web}, se dá por
um visitante entrando em um \textit{site} pelo seu navegador, o qual irá enviar um pedido para o servidor,
no qual todos os componentes \ac{LAMP} estão instalados e sendo executados. Este servidor pode então prover ao usuário, interação com 
banco de dados através de \textit{scripts} \ac{PHP} através de formulários enviados ao navegador pelo protocolo \ac{HTTP}.


\subsection{HISTÓRICO}
\label{subsec:historico}

O conceito principal em volta do \ac{LAMP} (um servidor \textit{web} sem custo) foi possível no início de
1995 quando a \ac{CERN} introduziu o conceito de \ac{CGI}, que tornou possível aos servidores
executar códigos para criar páginas dinâmicas \cite{CGI:online}. Linux, \ac{CERN} httpd e linguagens de programação do lado do servidor
como Perl estavam disponíveis gratuitamente, mas conseguir um banco de dados gratuito
só foi possível mais tarde, com o lançamento de Postgre95.

Ainda em meados de 1995, o servidor \ac{HTTP} Apache e \ac{PHP} foram lançados, compondo então o conjunto de aplicações \ac{LAPP}.
Finalmente em 1996, MySQL foi lançado e, com ele, o conjunto \ac{LAMP} completo fez-se possível. A popularidade do \ac{LAMP}
cresceu rapidamente nos anos 90, já que muitas empresas, por razões monetárias, utilizavam \textit{softwares} de código aberto
em suas páginas \textit{web}. Essa popularidade inicial contribuiu para que o LAMP fosse amplamente utilizado. Assim, se uma
falha é encontrada nele, uma grande quantidade de usuários são afetados.


\subsection{APLICABILIDADE}
\label{subsec:aplicabilidade}

Sistemas \ac{LAMP} podem ser encontrados em diversos níveis de aplicações. Quem utiliza um sistema operacional com kernel Linux em seu computador pessoal
e deseja desenvolver uma aplicação \textit{web}
pode fazê-la através da instalação dos componentes faltantes, ou seja, o Apache como servidor \ac{HTTP}, MySQL como banco de dados local e \ac{PHP} como linguagem de \textit{script}
de servidor local. Após essas configurações o sistema está pronto para exibir \textit{web sites} criados localmente, os quais poderam conter formulários a serem processados e enviados
a outro servidor ou armazenados na própria máquina. Com o ajuste de alguns detalhes (configurações de \textit{firewall} e permissões), este \textit{site} desenvolvido localmente
pode se tornar acessível à usuários externos, fazendo com que o sistema se assemelhe à um servidor contratado.

Não se limitando a projetos de desenvolvimento local, o \ac{LAMP} se encontra frequentemente em servidores providos por \ac{InP}s, onde a principal diferença de um sistema local
é a falta de interface gráfica, para alguns usuários experientes isso não é um problema e então a instalação dos componentes se dá de forma muito parecida,
através de linhas de comando.

\section{FUNCIONAMENTO E COMPONENTES BÁSICOS}
\label{sec:componentes}

Para garantir o bom funcionamento do sistema, é necessário a boa comunicação e integração entre todos os componentes do \ac{LAMP}.
Apesar de serem serviços independentes, juntos eles constituem um servidor \textit{web} capaz de executar \textit{scripts} (do lado do servidor) 
e armazenar dados. Detalhes dos componentes do sistema se darão a seguir.

\subsection{Linux}
\label{subsec:linux}

Linux é o \textit{kernel} atuante como base de diversos \ac{SO}s de software livre, tais como Arch, Fedora, Debian e outros. 
Como \textit{kernel} de diversas distribuições, o Linux é o núcleo do \ac{SO} atuando em baixo nível, permitindo o bom gerenciamento 
do \ac{SO} sobre o \textit{hardware} \cite{kernel:online}.

Desde sua origem em 1991, sistemas Linux vem crescendo e ganhando
uma grande força na computação, atualmente presente em lugares desde a bolsa
de valores de Nova York e supercomputadores  à telefones celulares e computadores
pessoais, o Linux é um software livre desenvolvido de maneira
colaborativa \cite{WhatI30:online}. Mais de 1.000 desenvolvedores
de pelo menos 100 diferentes companhias, contribuíram para cada
versão do \textit{kernel} sob a licensa \ac{GPL} que é baseada em quatro
liberdades \cite{Whati7:online}:

\begin{itemize}
 \item A liberdade de executar o programa como quiser, para qualquer propósito;
 \item A liberdade para estudar como o programa funciona, e alterá-lo para que ele execute como você queira. Ter acesso ao código fonte é necessário para tal;
 \item A liberdade para redistribuir cópias para ajudar o próximo; e
 \item A liberdade para distribuir cópias de suas versões modificadas para outros. Fazendo isso você concede à comunidade a chance de se beneficiarem de suas alterações. Ter acesso ao código fonte é necessário para tal.
\end{itemize}

Por esses motivos o Linux tem sido bem-sucedido, particularmente como plataforma de servidor: 
até mesmo em organizações que confiam veemente em sistemas operacionais
comerciais como Microsoft Windows, o Linux aparece frequentemente em papeis infraestruturais, como em \textit{gateways} de \ac{SMTP} e servidores \ac{DNS}
devido a sua confiança, segurança, baixo custo e a qualidade execepcional das aplicações do servidor \cite{bauer2005linux}.

No acrônimo \ac{LAMP} o componente Linux é o primeiro a aparecer. Sendo a base do sistema, todos os outros componentes (Apache, MySQL e PHP) são executados
sob \textit{kernel} Linux, constituindo assim um serviço gratuito disponibilizado através da integração de um conjunto de \textit{softwares} livres.

\subsection{Apache}
\label{subsec:apache}

Atuando como servidor \ac{HTTP} no sistema \ac{LAMP}, o Apache é o servidor \textit{web}
mais popular na Internet desde Abril de 1996 \cite{http:apache}.
O Apache é um projeto de código livre (sob a licensa \ac{GPL}) da \ac{ASP}, o qual tem como 
objetivo manter um seguro, eficiente e extensível servidor que provê
serviços \ac{HTTP} de acordo com os padrões \ac{HTTP} atuais.

Como segundo componente do acrônimo LAMP, o servidor Apache é o provedor de serviços \ac{HTTP}. Sendo capaz de aceitar requisições \ac{HTTP}, é este componente 
o responsável por responder ao \textit{browser} uma requisição de página \textit{web}, por exemplo. Solicitações também podem ser efetuadas através de execuções de
\textit{scripts} \ac{PHP}. 

Páginas mais complexas, consequentemente, são resultados de sistemas mais complexos. A busca e amostragem de dados em uma 
página \textit{web} não se dá pelo retorno imediato do servidor à aplicação solicitante, dependendo também da execução de um \textit{script} 
solicitando um certo conjunto de dados ao banco de dados local através de consultas em
\ac{SQL} executadas pelo \ac{SGBD} MySQL, terceiro componente do acrônimo.


\subsection{MySQL}
\label{subsec:mysql}

O \ac{BD} MySQL, foi projetado com base no mSQL, o qual tinha muitos problemas, como 
não ser rápido e flexível o suficiente para o uso dos usuários \cite{MySQL14:online}, com isso a necessidade
de um novo \ac{BD} foi aumentando e com base nesse conceito foi desenvolvido o que
hoje é conhecido como MySQL, um \ac{SGBD} que viabiliza programação em \ac{SQL} presente no servidor \ac{LAMP}, 
o qual se comunica com perfeição com a linguagem de programação presente no \ac{LAMP} (PHP), com isso 
veio a ser adotado como principal \ac{BD} nos servidores.

Um \ac{BD} pode ser definido como uma coleção de dados, para conseguir acessar
os dados armazenados nesse sistema, teve-se a necessidade de criar algum tipo de gerenciador,
sendo o MySQL um dos mais usados. Algumas características desse sistema\cite{MySQL69:online}:

\begin{itemize}
 \item \textbf{Banco de dados relacional:} a principal diferença desse tipo de \ac{BD} para os outros
 é que os dados são guardados em pequenas tabelas de uma forma que seu acesso seja da forma mais eficiente
 o possível, obtendo um tempo menor de resposta com o servidor e com isso passou a ganhar espaço no mercado.
 \item \textbf{\textit{Open Source:}} esse termo corresponde que qualquer pessoa pode modificar o 
 \textit{software} do jeito que preferir, podendo ajustá-lo conforme a sua necessidade, sendo perfeito
 para programadores experientes que precisam adaptá-los a seus critérios.
 \item \textbf{Rápido, confiável, escalável e fácil de usar:} como foi criado para atender a grandes
 quantidades de dados de uma forma mais rápida que seus concorrentes, foi apenas lógico que se tornasse
 um dos mais rápidos \ac{BD}. Portanto começou a ser utilizado em grande escala, consequentemente a 
 segurança foi aumentando juntamente com sua escalabilidade para atender a demanda de usuários. 
\end{itemize}

Mesmo com a segurança presente, precisamos ainda tomar algumas atitudes para 
dificultar que o \ac{BD} seja acessado por pessoas não autorizadas. Alguns métodos básicos que 
ajudam a proteger seu \ac{BD} \cite{MySQL10:online}:

\begin{itemize}
 \item Não prover acesso a ninguém para a tabela usuário do \ac{BD} MySQL.
 \item Não guardar senhas sem algum tipo de função \textit{hash} (algoritmo usado para transformar 
 sua senha para uma \textit{string} ilegível.
 \item Crie senhas aleátorias, porém de fácil memorização.
 \item Invista em um \textit{firewall}, protegem pelo menos 50\% dos ataques feitos contra seu \textit{software}.
 \item Sempre criptografe os dados que precisam ser enviados pela internet.
\end{itemize}

Portanto, seguindo algumas boas práticas de segurança relativamente simples, têm-se um \ac{BD} protegido e qualquer
pessoa não autorizada não poderá acessá-lo.

\subsection{PHP}
\label{subsec:php}

O \ac{PHP} foi criado em 1994 por Rasmus Lerdof, o projeto inicial era um simples conjunto de \ac{CGI}s\footnote{Uma maneira padrão para um servidor \textit{web} passar a
solitação do usuário para uma aplicação e receber dados para enviar ao usuário.} binários escritos na linguagem de
programação C, usados para rastrear as visitas ao seu \textit{site}\cite{PHP:H3:online}. Com o tempo, otimizações foram sendo feitas e funcionalidades adicionadas.
Sendo lançado em 1998, o \ac{PHP} 3.0 foi a primeira versão que contém traços do \ac{PHP} de hoje em dia, incluindo o suporte a programação orientada a
objeto. Porém essa versão tinha muita dificuldade em processar aplicações complexas, foi com base nessa premissa que foram lançadas as versões 4.0
e 5.0 (Julho de 2004), principalmente para melhorar seu antecessor e acrescentar dezenas de novos recursos.

Usado principalmente para desenvolvimento \textit{web}, é um \textit{script open source} de uso geral. As principais áreas que 
\textit{scripts} \ac{PHP} são mais utilizados \cite{PHP:O35:online}:
\begin{itemize}
 \item \textbf{Scripts no lado do servidor.} Podendo acessar os resultados do seu programa com um navegador web.
 \item \textbf{Scripts de linha de comando.} Executar os scripts sem um servidor ou navegador, apenas necessita de um interpretador PHP.
 \item \textbf{Escrever aplicações desktop.} Não é a melhor linguagem para se desenvolver aplicações desktop, porém para um programador experiente o PHP tem alguns recursos
 avançados que permitem escrever esse sistema.
\end{itemize}

Com as características destacadas acima, pode-se perceber o quão viável o \ac{PHP} é como linguagem de programação dos servidores \ac{LAMP}, sendo principalmente
por seus \textit{scripts} no lado do servidor, os quais retornam informações de uma forma rápida, eficiente e de fácil acesso.

Uma característica é a escalabilidade que o \ac{PHP} possui, podendo ser utilizado na maioria
dos sistemas operacionais e servidores \textit{web} \cite{ongoi15:online}. Portanto, pelas características descrita, ele vem sendo aplicado cada
vez mais em servidores LAMP, por suas várias extensões que facilitam a conectividade com diversos banco de dados e sua fácil integração com servidores \textit{web}. 
Logo, observa-se o porquê do \ac{PHP} ser aplicado em tantas aplicações, seja por seu fácil entendimento, sua maneira simples de programar ou até mesmo sua eficiente
integração com os demais componentes do \ac{LAMP}.


\section{FUNDAMENTAÇÃO DE ATAQUE E SOLUÇÕES}
\label{sec:fundamentos}

Testes de penetração de servidores \textit{web} não devem ser confundidos com ataques maliciosos. Apesar de possuírem rotinas 
parecidas, possuem objetivos distintos. Ataques maliciosos são realizados para roubar informações, causar indisponibilidade de serviços
(\ac{DoS}) ou qualquer outro evento indesejado ao responsável pelo servidor. Já um teste de penetração consiste em um processo 
autorizado, programado e sistemático onde se faz uso de vulnerabilidades conhecidas para realizar tentativas de invasão a um servidor,
rede ou conteúdos de aplicações.

Testes de penetração podem ser executados de mais de uma maneira para propor mais de um ponto de vista sob a mesma organização. 
Para tal, existem dois tipos de testes (não exclusivos) que podem ser conduzidos \cite{sans:2002}.

\begin{description}
      \item[Teste  interno de penetração] Realizado com o objetivo de identificar vulnerabilidades com acesso
      físico ou exposição a engenharia social. Servem para determinar quais vulnerabilidades existem no sistema interno, 
      acessível somente à pessoas autorizadas com acesso a rede interna da organização.

      \item[Teste externo de penetração] Realizado com o objetivo de identificar vulnerabilidades presentes através de
      conexões que foram estabelecidas através da conexão entre a organização e a Internet (através do \textit{firewall} ou \textit{gateway}).
\end{description}

\section{FRAMEWORKS E SOLUÇÕES PARA ANÁLISE DE VULNERABILIDADES}
\label{sec:frameworks}

\textit{Frameworks} para análise de vulnerabilidades são ferramentas para facilitar a detecção de vulnerabilidades em determinado 
sistema/página \textit{web}.

Uma deles é o \textit{Nikto}, o qual é uma ferramenta de segurança específica para \textit{website}, podendo verificar:
mais de 6.000 ameaças em potencial localizadas em arquivos ou programas, mais de 1.200 versões desatualizadas de servidores
 e mais de 270 problemas em servidores específicos \cite{Nikto57:online}. Alguns dos principais problemas que podem
ser achados são: arquivos perigosos, serviços mal configurados, \textit{scripts} vulneráveis, entre outros.

Outra ferramenta que pode ser citada é o \textit{Vega}, com objetivos semelhantes ao \textit{Nikto}, 
porém com dois modos de operação \cite{About78:online}: 

\begin{itemize}
 \item \textbf{\textit{Scanner} automático:} rastreia automaticamente por \textit{websites}, extraindo \textit{links},
 e executa módulos em possíveis pontos de vulnerabilidades.
 \item \textbf{\textit{Proxy} de interceptação:} permite análises detalhadas sobre a interação navegador-aplicação.
\end{itemize}

Pode-se citar ainda o OpenVAS, uma ferramenta para varredura e gerenciamento de vulnerabilidades. Podendo ser subdividido em duas
arquiteturas \cite{OpenV32:online}:

\begin{description}
 \item [Rastreados OpenVAS] executa os testes de vulnerabilidades.
 \item [Gerenciador OpenVAS] consolida a varredura de vulnerabilidade em uma solução completa de gerenciamento de vulnerabilidade.
\end{description}


\section{NORMAS, RECOMENDAÇÕES E BOAS PRÁTICAS PARA ANÁLISE DE VULNERABILIDADES}
\label{sec:normas}


Vulnerabilidade pode ser definida como um erro no \textit{software} que permite que uma pessoa não autorizada ganhe acesso ao sistema
ou a rede interna \cite{CVE-F22:online}. Primeiro monitora-se
com qual frequência determinada vulnerabilidade pode ocorrer, e o quão prejudicial é para o programa.
Quando é descoberto alguma vulnerabilidade com os testes realizados,
ocorre a verificação em um banco de dados de vulnerabilidades, sendo o \ac{CVE} uma boa fonte para conhecer 
um pouco mais sobre o problema encontrado. 

Existem também os escaneadores de vulnerabilidade, os quais são \textit{softwares} que ajudam na identificação de possíveis
problemas que podem facilitar a corrupção do 
sistema, identificando, como por exemplo: versões de \textit{softwares} desatualizadas, configurações falhas. Segundo \cite{NIST:online},
esses escaneadores podem:

\begin{itemize}
 \item \textbf{Verificar políticas de segurança.}
 \item \textbf{Prover informações sobre alvos para testes de penetração.}
 \item \textbf{Fornecer informações sobre como diminuir as vulnerabilidades descobertas.}
\end{itemize}

Contudo, esses escaneadores atuam de forma local. Ao identificar de maneira isolada cada falha e vulnerabilidade
muitas vezes não passam a proporção real do problema, que se daria em um único contexto com todas as falhas identificadas. Ou seja,
várias pequenas vulnerabilidades podem, juntas, proporcionar um grande risco ao servidor.

Outro meio de se prevenir contra ataques pode ser feito com uma simples revisão dos códigos fontes quando estes estão sendo implementados,
não apenas nos seus estados finais. Também é viável realizar 
testes unitários para verificar sua consistência.


\begin{comment}

  EXEMPLO DE FIGURA

  \begin{figure}[!h]
  \centering
  \includegraphics[scale=0.7]{sdnARCH.png}
  \caption{Diagrama da arquitetura de uma SDN.}
  \label{fig:sdnArch}
  \end{figure}

  EXEMPLO DE DESCRIÇÃO DE ALTERNATIVAS

  \begin{description}
      \item[Maxinet] Baseado no \textit{Mininet}, possui o objetivo de superar as limitações em relação ao
      número de dispositivos de rede que podem ser simulados. Segundo o autor~\cite{maxinet}, o \textit{Maxinet} tem
      como propósito simular grandes redes de \textit{data-centers} e superar o desempenho do \textit{Mininet} através
      da utilização de vários computadores trabalhando de forma distribuída. O \textit{Maxinet} contém \textit{built-in} um
      gerador de trafego de rede, baseado em recentes análises de casos reais.

      \item[Mininet-Hifi] O \textit{Mininet-Hifi}~\cite{mininethifi} é um projeto com a finalidade de melhorar
      a reprodutibilidade de testes realizados no \textit{Mininet}. Implementado de forma semelhante, utilizando 
      \textit{containers}, o \textit{Mininet-Hifi} utiliza de recursos adicionais para melhorar a reprodutibilidade. 
  \end{description}

\end{comment}




\chapter{Conclusão}

Conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
 conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
  conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
   conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
    conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
     conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
      conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
 conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
  conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão conclusão
  


